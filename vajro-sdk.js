!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.VajroSDK=o():e.VajroSDK=o()}(window,(()=>(()=>{"use strict";var e={d:(o,n)=>{for(var t in n)e.o(n,t)&&!e.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:n[t]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};e.r(o),e.d(o,{actions:()=>R,initialize:()=>a,isSDKReady:()=>l,subscribe:()=>d,triggers:()=>n,unsubscribe:()=>u,variables:()=>r});var n={};e.r(n),e.d(n,{customerUpdated:()=>y,onCartUpdated:()=>g,onPageLoaded:()=>f});var t={};e.r(t),e.d(t,{addToCart:()=>b,disableCheckoutButton:()=>C,enableCheckoutButton:()=>A,openAuthentication:()=>_,openCart:()=>O,openCollection:()=>m,openCustomBlock:()=>E,openInAppBrowser:()=>T,openLandingPage:()=>P,openProduct:()=>w,openUrl:()=>I,showAlert:()=>S,showToast:()=>N});const r={},i=e=>{console.log("ğŸ”„ Updating appContext with:",e),Object.keys(e).forEach((o=>{"object"!=typeof e[o]||null===e[o]||Array.isArray(e[o])?r[o]=e[o]:r[o]=Object.assign(Object.assign({},r[o]),e[o])})),console.log("âœ… Updated VajroSDK.variables:",r)};let c=!1;const a=(e={})=>{console.log("ğŸš€ Initializing VajroSDK with Context:",e),e&&0!==Object.keys(e).length?i(e):console.warn("âš ï¸ No app context provided. Waiting for WebView updates..."),c=!0,console.log("âœ… VajroSDK is initialized:",JSON.stringify(r,null,2))},l=()=>c,s={},d=(e,o)=>{s[e]||(s[e]=[]),s[e].push(o),console.log(`âœ… Subscribed to event: ${e}`),console.log("ğŸ” Current Event Listeners:",s)},u=(e,o)=>{s[e]&&(s[e]=s[e].filter((e=>e!==o)),console.log(`âŒ Unsubscribed from event: ${e}`))},p=(e,o)=>{console.log(`ğŸš€ Dispatching event: ${e}`,o),i(o),s[e]?s[e].forEach((n=>{try{n(o)}catch(o){console.error(`âŒ Error executing listener for ${e}:`,o)}})):console.log(`âš ï¸ No subscribers found for event: ${e}`)},f=e=>{console.log("ğŸš€ ON_PAGE_LOADED Triggered:",e),p("onPageLoaded",e)},g=e=>{console.log("ğŸš€ ON_CART_UPDATED Triggered:",e),p("onCartUpdated",e)},y=e=>{console.log("ğŸš€ ON_CUSTOMER_UPDATED Triggered:",e),p("onCustomerUpdated",e)};var h;!function(e){e.OPEN_PRODUCT="openProduct",e.OPEN_COLLECTION="openCollection",e.OPEN_CART="openCart",e.OPEN_CUSTOM_BLOCK="openCustomBlock",e.OPEN_LANDING_PAGE="openLandingPage",e.OPEN_URL="openUrl",e.OPEN_IN_APP_BROWSER="openInAppBrowser",e.OPEN_AUTHENTICATION="openAuthentication",e.ADD_TO_CART="addToCart",e.ENABLE_CHECKOUT_BUTTON="enableCheckoutButton",e.DISABLE_CHECKOUT_BUTTON="disableCheckoutButton",e.SHOW_TOAST="showToast",e.SHOW_ALERT="showAlert",e.SET_LOCAL_STORAGE="setLocalStorage",e.GET_LOCAL_STORAGE="getLocalStorage"}(h||(h={}));const v=(e,o)=>(console.log(`ğŸš€ Dispatching Action: ${e}`,o),new Promise(((n,t)=>{if(!window.flutter_inappwebview||"function"!=typeof window.flutter_inappwebview.callHandler)return console.error("âŒ Flutter engine is not available."),t({errorCode:503,errorType:"ERROR_FLUTTER_ENGINE_NOT_AVAILABLE",errorMessage:"Flutter engine is not available. Ensure the app is running inside a Flutter WebView."});window.flutter_inappwebview.callHandler(e,o).then((o=>{(null==o?void 0:o.errorCode)?(console.error(`âŒ Server Error from Flutter: ${o.errorMessage}`,o),t(o)):(console.log(`âœ… Action successfully dispatched: ${e}`),n(o))})).catch((e=>{console.error("âŒ WebView Communication Error:",e),t({errorCode:502,errorType:"ERROR_WEBVIEW_FAILURE",errorMessage:"Failed to communicate with Flutter WebView."})}))})));const w=e=>{return o=void 0,n=void 0,r=function*(){try{console.log("ğŸ“‚ Validating OpenProduct Payload..."),(e=>{if(!("productId"in e)&&!("productHandle"in e))throw{errorCode:400,errorType:"ERROR_INVALID_INPUT",errorMessage:"Missing required fields: productId or productHandle."};if(void 0!==e.productId&&("string"!=typeof e.productId||""===e.productId.trim()))throw{errorCode:400,errorType:"ERROR_INVALID_INPUT_TYPE",errorMessage:"Invalid productId. It must be a non-empty string."};if(void 0!==e.productHandle&&("string"!=typeof e.productHandle||""===e.productHandle.trim()))throw{errorCode:400,errorType:"ERROR_INVALID_INPUT_TYPE",errorMessage:"Invalid productHandle. It must be a non-empty string."};if(void 0!==e.variantId&&("string"!=typeof e.variantId||""===e.variantId.trim()))throw{errorCode:400,errorType:"ERROR_INVALID_INPUT_TYPE",errorMessage:"Invalid variantId. It must be a non-empty string."};if(void 0!==e.variantHandle&&("string"!=typeof e.variantHandle||""===e.variantHandle.trim()))throw{errorCode:400,errorType:"ERROR_INVALID_INPUT_TYPE",errorMessage:"Invalid variantHandle. It must be a non-empty string."};if(void 0===e.openInNewPage)e.openInNewPage=!0;else if("boolean"!=typeof e.openInNewPage)throw{errorCode:400,errorType:"ERROR_INVALID_INPUT_TYPE",errorMessage:"Invalid openInNewPage. It must be a boolean."}})(e),console.log("ğŸ“‚ Dispatching OpenProduct Action..."),yield v(h.OPEN_PRODUCT,e),console.log("âœ… Product Opened Successfully!")}catch(e){return console.error("âŒ Failed to open product:",e),Promise.reject(e)}},new((t=void 0)||(t=Promise))((function(e,i){function c(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(o){var n;o.done?e(o.value):(n=o.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,a)}l((r=r.apply(o,n||[])).next())}));var o,n,t,r};const m=e=>{return o=void 0,n=void 0,r=function*(){try{console.log("ğŸ“‚ Validating OpenCollection Payload..."),(e=>{if(!e.collectionHandle&&!e.collectionId)throw new Error('Either "collectionHandle" or "collectionId" must be provided.');if(e.collectionHandle&&"string"!=typeof e.collectionHandle)throw new Error('"collectionHandle" must be a string.');if(e.collectionId&&"string"!=typeof e.collectionId)throw new Error('"collectionId" must be a string.')})(e),console.log("ğŸ“‚ Dispatching OpenCollection Action..."),yield v(h.OPEN_COLLECTION,e),console.log("âœ… Collection Opened Successfully!")}catch(e){return console.error("âŒ Failed to open collection:",e),Promise.reject(e)}},new((t=void 0)||(t=Promise))((function(e,i){function c(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(o){var n;o.done?e(o.value):(n=o.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,a)}l((r=r.apply(o,n||[])).next())}));var o,n,t,r};const O=()=>{return e=void 0,o=void 0,t=function*(){try{console.log("ğŸ›’ Dispatching OpenCart Action..."),yield v(h.OPEN_CART,null),console.log("âœ… Cart Opened Successfully!")}catch(e){return console.error("âŒ Failed to open cart:",e),Promise.reject(e)}},new((n=void 0)||(n=Promise))((function(r,i){function c(e){try{l(t.next(e))}catch(e){i(e)}}function a(e){try{l(t.throw(e))}catch(e){i(e)}}function l(e){var o;e.done?r(e.value):(o=e.value,o instanceof n?o:new n((function(e){e(o)}))).then(c,a)}l((t=t.apply(e,o||[])).next())}));var e,o,n,t};const E=e=>{return o=void 0,n=void 0,r=function*(){try{console.log("ğŸ› ï¸ Validating OpenCustomBlock Payload..."),(e=>{if(!e.id||"string"!=typeof e.id||""===e.id.trim())throw new Error('Invalid "id". It must be a non-empty string.')})(e),console.log("ğŸ› ï¸ Dispatching OpenCustomBlock Action..."),yield v(h.OPEN_CUSTOM_BLOCK,e),console.log("âœ… Custom Block Opened Successfully!")}catch(e){return console.error("âŒ Failed to open custom block:",e),Promise.reject(e)}},new((t=void 0)||(t=Promise))((function(e,i){function c(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(o){var n;o.done?e(o.value):(n=o.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,a)}l((r=r.apply(o,n||[])).next())}));var o,n,t,r};const P=e=>{return o=void 0,n=void 0,r=function*(){try{console.log("ğŸ› ï¸ Validating OpenLandingPage Payload..."),(e=>{if(!e.id||"string"!=typeof e.id||""===e.id.trim())throw new Error('Invalid "path". It must be a non-empty string.')})(e),console.log("ğŸ› ï¸ Dispatching OpenLandingPage Action..."),yield v(h.OPEN_CUSTOM_BLOCK,e),console.log("âœ… Landing Page Opened Successfully!")}catch(e){return console.error("âŒ Failed to open landing page:",e),Promise.reject(e)}},new((t=void 0)||(t=Promise))((function(e,i){function c(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(o){var n;o.done?e(o.value):(n=o.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,a)}l((r=r.apply(o,n||[])).next())}));var o,n,t,r};const I=e=>{return o=void 0,n=void 0,r=function*(){try{console.log("ğŸ› ï¸ Validating OpenUrl Payload..."),(e=>{if(!e.path||"string"!=typeof e.path||""===e.path.trim())throw new Error('Invalid "path". It must be a non-empty string.')})(e),console.log("ğŸ› ï¸ Dispatching OpenUrl Action..."),yield v(h.OPEN_URL,e),console.log("âœ… Url Opened Successfully!")}catch(e){return console.error("âŒ Failed to open url:",e),Promise.reject(e)}},new((t=void 0)||(t=Promise))((function(e,i){function c(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(o){var n;o.done?e(o.value):(n=o.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,a)}l((r=r.apply(o,n||[])).next())}));var o,n,t,r};const T=e=>{return o=void 0,n=void 0,r=function*(){try{console.log("ğŸ› ï¸ Validating OpenInAppBrowser Payload..."),(e=>{if(!e.path||"string"!=typeof e.path||""===e.path.trim())throw new Error('Invalid "path". It must be a non-empty string.')})(e),console.log("ğŸ› ï¸ Dispatching OpenInAppBrowser Action..."),yield v(h.OPEN_IN_APP_BROWSER,e),console.log("âœ… InAppBrowser Opened Successfully!")}catch(e){return console.error("âŒ Failed to open InAppBrowser:",e),Promise.reject(e)}},new((t=void 0)||(t=Promise))((function(e,i){function c(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(o){var n;o.done?e(o.value):(n=o.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,a)}l((r=r.apply(o,n||[])).next())}));var o,n,t,r};const _=e=>{return o=void 0,n=void 0,r=function*(){try{console.log("ğŸ› ï¸ Validating OpenAuthentication Payload..."),(e=>{if(!e.type||"string"!=typeof e.type||""===e.type.trim())throw new Error('Invalid "type". It must be a non-empty string.')})(e),console.log("ğŸ› ï¸ Dispatching OpenAuthentication Action..."),yield v(h.OPEN_AUTHENTICATION,e),console.log("âœ… Authentication Opened Successfully!")}catch(e){return console.error("âŒ Failed to open Authentication",e),Promise.reject(e)}},new((t=void 0)||(t=Promise))((function(e,i){function c(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(o){var n;o.done?e(o.value):(n=o.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,a)}l((r=r.apply(o,n||[])).next())}));var o,n,t,r};const b=e=>{return o=void 0,n=void 0,r=function*(){return new Promise(((o,n)=>{try{(e=>{if(!e.variantId)throw new Error("Variant Id must be provided.");if(e.variantId&&"string"!=typeof e.variantId)throw new Error("Invalid variantId. It must be a non-empty string.");if(!e.quantity&&"number"!=typeof e.quantity)throw new Error("Invalid quantity. It must be a number.")})(e),v(h.ADD_TO_CART,null),o()}catch(e){console.error("Failed to add to cart:",e),n(e)}}))},new((t=void 0)||(t=Promise))((function(e,i){function c(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(o){var n;o.done?e(o.value):(n=o.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,a)}l((r=r.apply(o,n||[])).next())}));var o,n,t,r};const A=()=>{return e=void 0,o=void 0,t=function*(){try{console.log("ğŸ›’ Dispatching EnableheckoutButton Action..."),yield v(h.ENABLE_CHECKOUT_BUTTON,null),console.log("âœ… Checkout Button Enabled Successfully!")}catch(e){return console.error("âŒ Failed to enable checkout button:",e),Promise.reject(e)}},new((n=void 0)||(n=Promise))((function(r,i){function c(e){try{l(t.next(e))}catch(e){i(e)}}function a(e){try{l(t.throw(e))}catch(e){i(e)}}function l(e){var o;e.done?r(e.value):(o=e.value,o instanceof n?o:new n((function(e){e(o)}))).then(c,a)}l((t=t.apply(e,o||[])).next())}));var e,o,n,t};const C=()=>{return e=void 0,o=void 0,t=function*(){try{console.log("ğŸ›’ Dispatching DisableCheckoutButton Action..."),yield v(h.DISABLE_CHECKOUT_BUTTON,null),console.log("âœ… Checkout Button Disabled Successfully!")}catch(e){return console.error("âŒ Failed to disable checkout button:",e),Promise.reject(e)}},new((n=void 0)||(n=Promise))((function(r,i){function c(e){try{l(t.next(e))}catch(e){i(e)}}function a(e){try{l(t.throw(e))}catch(e){i(e)}}function l(e){var o;e.done?r(e.value):(o=e.value,o instanceof n?o:new n((function(e){e(o)}))).then(c,a)}l((t=t.apply(e,o||[])).next())}));var e,o,n,t};const N=e=>{return o=void 0,n=void 0,r=function*(){try{console.log("ğŸ› ï¸ Validating ShowToast Payload..."),(e=>{if(!e.message)throw new Error("Toast message should be provided.");if(!e.type)throw new Error("Toast type should be provided.");if(!e.message||"string"!=typeof e.message||""===e.message.trim())throw new Error("Toast message should be a non empty string.");if(!e.type||"string"!=typeof e.type||""===e.type.trim())throw new Error("Toast type should be a non empty string.")})(e),console.log("ğŸ› ï¸ Dispatching ShowToast Action..."),yield v(h.SHOW_TOAST,e),console.log("âœ…Toast Opened Successfully!")}catch(e){return console.error("âŒ Failed to open toast:",e),Promise.reject(e)}},new((t=void 0)||(t=Promise))((function(e,i){function c(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(o){var n;o.done?e(o.value):(n=o.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,a)}l((r=r.apply(o,n||[])).next())}));var o,n,t,r};const S=e=>{return o=void 0,n=void 0,r=function*(){try{console.log("ğŸ› ï¸ Validating ShowAlert Payload..."),(e=>{if(!e.message)throw new Error("Alert message should be provided.");if(!e.type)throw new Error("Alert type should be provided.");if(!e.message||"string"!=typeof e.message||""===e.message.trim())throw new Error("Alert message should be a non empty string.");if(!e.type||"string"!=typeof e.type||""===e.type.trim())throw new Error("Alert type should be a non empty string.")})(e),console.log("ğŸ› ï¸ Dispatching ShowAlert Action..."),yield v(h.SHOW_ALERT,e),console.log("Alert Opened Successfully!")}catch(e){return console.error("âŒ Failed to open alert:",e),Promise.reject(e)}},new((t=void 0)||(t=Promise))((function(e,i){function c(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(o){var n;o.done?e(o.value):(n=o.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,a)}l((r=r.apply(o,n||[])).next())}));var o,n,t,r},R=new Proxy(t,{get(e,o){if(!(o in e)){const e={errorCode:501,errorType:"ERROR_NOT_IMPLEMENTED",errorMessage:`This action '${o}' is not yet implemented`};return console.error("âŒ Error:",e),()=>Promise.reject(e)}return e[o]}});return o})()));
